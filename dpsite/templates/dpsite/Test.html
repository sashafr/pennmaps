<html>
<head>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<style>
	* {box-sizing: border-box;}


	 /* .searchBox {
	  float: right;
	} */


	.searchBox input[type=text] {
	  padding: 6px;
	  margin-top: 8px;
	  font-size: 17px;
	  border: none;
	}
	.searchBox button {
	  /* float: right; */
	  padding: 6px 10px;
	  margin-top: 8px;
	  margin-right: 16px;
	  background: #ddd;
	  font-size: 17px;
	  border: none;
	  cursor: pointer;
	}


	.searchBox button:hover {
	  background: #ccc;
	}

	@media screen and (max-width: 600px) {
	  .searchBox {
	    float: none;
	  }
	  .searchBox input[type=text], .searchBox button {
	    float: none;
	    display: block;
	    text-align: left;
	    width: 100%;
	    margin: 0;
	    padding: 14px;
	  }
	  .searchBox input[type=text] {
	    border: 1px solid #ccc;
	  }
	}
	</style>
</head>

<body>

	<div class="searchBox">
		<form action="/action_page.php">
			<input type="text" placeholder="Search.." name="search">
			<button type="submit"><i class="fa fa-search"></i></button>
		</form>
	</div>
	<!--
	{% for mapItem in map_items%}
	{% for point in mapItem.location1%}
	<p>{{point.coords}}</p>

	{% endfor %}
	{% endfor %}
-->
<!--
{% for mapItem in map_items%}
{% for tag in mapItem.tags.all%} -->
<!--<p>{{tag}}</p>-->
<!--
{% endfor %}
{% endfor %}-->
<div id="map" class="map"></div>
<div id="popup" class="ol-popup">
	<a href="#" id="popup-closer" class="ol-popup-closer"></a>
	<div id="popup-content"></div>
</div>



<script src="https://openlayers.org/en/v4.6.5/build/ol.js"></script>
<link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
<script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
<script src="https://openlayers.org/en/v4.6.5/build/ol.js"></script>
<script>


/**
* Elements that make up the popup.
*/
var container = document.getElementById('popup');
var content = document.getElementById('popup-content');
var closer = document.getElementById('popup-closer');


/**
* Add a click handler to hide the popup.
* @return {boolean} Don't follow the href.
*/
closer.onclick = function() {
	overlay.setPosition(undefined);
	closer.blur();
	return false;
};


/**
* Create an overlay to anchor the popup to the map.
*/
var overlay = new ol.Overlay({
	element: container,
	autoPan: true,
	autoPanAnimation: {
		duration: 250
	}
});


/**
* Create the map.
*/
var map = new ol.Map({
	layers: [
		new ol.layer.Tile({
			source: new ol.source.XYZ({
				url: 'https://api.mapbox.com/styles/v1/mirandamote/cjig4g2e218z52rqk7zaovjm9/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoibWlyYW5kYW1vdGUiLCJhIjoiY2ppZzRldDh0MGM2OTNxbzUwcnR5d3JyNiJ9.PVzMeD6NKLhtcIJFkv7ytQ'

			})
		})
	],
	overlays: [overlay],
	target: 'map',
	view: new ol.View({
		center: ol.proj.fromLonLat([-75.165222, 39.952583]),
		zoom: 12
	})
});

{% for mapItem in map_items%}
{% for point in mapItem.location1%}
var markers = new ol.layer.Vector({
	source: new ol.source.Vector({
		features: [
			new ol.Feature({
				geometry: new ol.geom.Point(ol.proj.fromLonLat([{{point.coords.0}} , {{point.coords.1}}])),

			})

		]
	}),
	style: new ol.style.Style({
		image: new ol.style.Icon({
			src: '//openlayers.org/en/v3.12.1/examples/data/icon.png',
			anchor: [0.5, 1]
		})
	})
});
map.addLayer(markers);
{% endfor %}
{% endfor %}

/**
* Add a click handler to the map to render the popup.
*/
map.on('singleclick', function(evt) {
	var name = map.forEachFeatureAtPixel(evt.pixel, function(feature) {
		return feature.get('name');
	})
	var coordinate = evt.coordinate;
	content.innerHTML = name;
	overlay.setPosition(coordinate);
});
map.on('pointermove', function(evt) {
	map.getTargetElement().style.cursor = map.hasFeatureAtPixel(evt.pixel) ? 'pointer' : '';
});

</script>


</body></html>
