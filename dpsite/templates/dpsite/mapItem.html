{% extends "dpsite/base.html" %}
{% load static %}
{% block content %}

<body>
    <!-- Below: pulled from index.html of bootstrap portfolio item theme; beginning adjustments to mimic inDesign markups -->

    <!-- Page Content -->
    <br> <!-- for space between divs without making margins/padding -->

    <div class="container">

        <!-- Portfolio Item Row -->
        <div class="row">
            <div class="col-md-6">
                {{ mapItem.display_media_full|safe }}
                <h2 class="my-3">{{ mapItem.title }}</h2>
                <h4>{{ mapItem.location_notes }}
                    <br>{{ mapItem.start_date }} to {{ mapItem.end_date }}</h4>
                    <p>{{ mapItem.description|safe }}</p>
            </div>

            <div class="col-md-4">
                <img class="img-fluid" src="https://i5.walmartimages.com/asr/4124033b-fac1-4c5e-965d-75611f1fe75f_1.ede2d65a57a1580e181a607f1ba7078e.jpeg?odnHeight=450&odnWidth=450&odnBg=FFFFFF">
                <h3 class="my-3">Information Sources</h3>
                <p>{{ mapItem.info_sources|safe }}</p>
            </div>

            <div class="col-md-2">
                {% for tag in mapItem.tags.all %}
                    {% if tag.description %}
                        <h3>{{ tag.title }}</h3>
                        <p>{{ tag.description|safe }}</p>
                        <hr />
                    {% endif %}
                {% endfor %}
            </div>


        </div>
        <!-- /.row -->

        <!-- Related Projects Row -->
        <h3 class="my-4">Explore Related Items</h3>

        <div class="row">
            {% for mediafile in mapItem.media.all %}
                <div class="col-md-3 col-sm-6 mb-4">
                    <div class="dp-mi-fixed-image" style="background-image: url('{{ mediafile.get_thm_url }}')">
                        {% if mediafile.get_main_url == "iframe" %}
                            <a href="#inline-{{ mediafile.id }}" class="image fit" data-lity data-lity-desc="{{ mediafile.title }}"></a>
                            <div id="inline-{{ mediafile.id }}" class="lity-hide">
                                {{ mediafile.file_iframe|safe }}
                            </div>
                        {% else %}
                            <a href="{{ mediafile.get_main_url }}" class="image fit" data-lity data-lity-desc="{{ mediafile.title }}"></a>
                        {% endif %}
                    </div>
                    <div class="inner">
                        {% if mediafile.get_main_url == "" %}
                            <a class="button disabled fit mapitem-button">Coming Soon</a>
                        {% elif mediafile.get_main_url == "iframe" %}
                            <a href="#inline-{{ mediafile.id }}" class=" mapitem-button button {% if forloop.counter|divisibleby:'4' %}style4{% elif forloop.counter|add:'1'|divisibleby:'4' %}style3{% elif forloop.counter|add:'2'|divisibleby:'4' %}style2{% endif %} fit" data-lity data-lity-desc="{{ mediafile.title }}">View</a>
                        {% else %}
                            <a href="{{ mediafile.get_main_url }}" class=" mapitem-button button {% if forloop.counter|divisibleby:'4' %}style4{% elif forloop.counter|add:'1'|divisibleby:'4' %}style3{% elif forloop.counter|add:'2'|divisibleby:'4' %}style2{% endif %} fit" data-lity data-lity-desc="{{ mediafile.title }}">View</a>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        </div>
        <!-- /.row -->

    </div>
</body>
{% endblock %}
